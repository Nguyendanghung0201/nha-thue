(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5db877a1"],{"00d8":function(t,s){(function(){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(t,s){return t<<s|t>>>32-s},rotr:function(t,s){return t<<32-s|t>>>s},endian:function(t){if(t.constructor==Number)return 16711935&e.rotl(t,8)|4278255360&e.rotl(t,24);for(var s=0;s<t.length;s++)t[s]=e.endian(t[s]);return t},randomBytes:function(t){for(var s=[];t>0;t--)s.push(Math.floor(256*Math.random()));return s},bytesToWords:function(t){for(var s=[],e=0,a=0;e<t.length;e++,a+=8)s[a>>>5]|=t[e]<<24-a%32;return s},wordsToBytes:function(t){for(var s=[],e=0;e<32*t.length;e+=8)s.push(t[e>>>5]>>>24-e%32&255);return s},bytesToHex:function(t){for(var s=[],e=0;e<t.length;e++)s.push((t[e]>>>4).toString(16)),s.push((15&t[e]).toString(16));return s.join("")},hexToBytes:function(t){for(var s=[],e=0;e<t.length;e+=2)s.push(parseInt(t.substr(e,2),16));return s},bytesToBase64:function(t){for(var e=[],a=0;a<t.length;a+=3)for(var i=t[a]<<16|t[a+1]<<8|t[a+2],o=0;o<4;o++)8*a+6*o<=8*t.length?e.push(s.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],a=0,i=0;a<t.length;i=++a%4)0!=i&&e.push((s.indexOf(t.charAt(a-1))&Math.pow(2,-2*i+8)-1)<<2*i|s.indexOf(t.charAt(a))>>>6-2*i);return e}};t.exports=e})()},"01ba":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZoAAADmCAYAAADskUNtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAqFJREFUeNrs3cFNwzAYgFFLLJBROgIjMEJH6QYdISMwCtyYgRMjhFSKUHBst0lsDuQ96VerSr348imx24QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/kyRJAU6dxPsb5HOfdcgBQOzJf4wzTKwAHdZlisHdKkTlZZoBj6ipFZshEZhAZAKFJXZFsFUdmsMQA1ApCfLtMaACoFprUnozQAFAlNLmNf6EBYHcQSqfLhAaAXUG4d4RZaADIBuE6+/y6ITJCA0A2CH1Y/kamXxkZoQEgGYR5ZN6mub0/r4yM0ACwCEIcmW6alw2RERoAFkGIIzN3729lusR3hAaARWgeiUy8Z5M7OCA0APwKwr3I3F5fo9iUDg4IDQDFIOT2ZHJx6UN6vwcAoVn9PJk+pG+jpSIEgNBknydTOl32PE0oREhoAFh1JfMot84AaBaZ3JUSACJTLTJCA0DTyAgNAIvItBoARKbZXCwzwHG1uF0GAD/OIgMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8I98CzAARMkhwlfKUk0AAAAASUVORK5CYII="},"044b":function(t,s){function e(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function a(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&e(t.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(e(t)||a(t)||!!t._isBuffer)}},"07f0":function(t,s,e){},"0dd7":function(t,s,e){"use strict";e("758d")},"0f3b":function(t,s,e){"use strict";e("a825")},"337e":function(t,s,e){},"4f41":function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"nk-content nk-content-fluid pt-0"},[s("div",{staticClass:"container-xl wide-lg"},[s("div",{staticClass:"nk-content-body"},[s("div",{staticClass:"nk-block-head nk-block-head-sm"},[s("div",{staticClass:"nk-block-between"},[s("div",{staticClass:"nk-block-head-content"},[s("h3",{staticClass:"nk-block-title page-title"},[t._v(t._s(t.$t("profile.profile")))])])])]),s("ul",{staticClass:"nav nav-switch-s2 nav-tabs bg-white d-lg-none w-100"},[s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link btn btn-sm btn-outline-light cursor-pointer",class:{active:"INFO"===t.tab},attrs:{href:"javascript:void(0)"},on:{click:function(s){t.tab="INFO"}}},[s("em",{staticClass:"icon ni ni-clock"}),t._v(" "+t._s(t.$t("profile.info"))+" ")])]),s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link btn btn-sm btn-outline-light cursor-pointer text-success",class:{active:"PASSWORD"===t.tab},attrs:{href:"javascript:void(0)"},on:{click:function(s){t.tab="PASSWORD"}}},[s("em",{staticClass:"icon ni ni-check-circle"}),t._v(" "+t._s(t.$t("login.password"))+" ")])]),s("li",{staticClass:"nav-item flex-grow-1 flex-sm-grow-0"},[s("a",{staticClass:"nav-link btn btn-sm btn-outline-light cursor-pointer text-warning w-100 d-flex align-items-center justify-content-center",class:{active:"SETTING"===t.tab},attrs:{href:"javascript:void(0)"},on:{click:function(s){t.tab="SETTING"}}},[s("em",{staticClass:"icon ni ni-alert-circle"}),t._v(" "+t._s(t.$t("profile.public_key"))+" ")])])]),s("div",{staticClass:"card card-bordered"},[s("div",{staticClass:"card-aside-wrap"},["INFO"===t.tab?s("change-info-form",{on:{changePassword:t.changeTab}}):t._e(),"PASSWORD"===t.tab?s("change-password-form",{on:{changeInfo:t.changeTab}}):t._e(),"SETTING"===t.tab?s("setting-key-form",{on:{changeKey:t.changeTab}}):t._e(),s("div",{staticClass:"card-aside card-aside-left user-aside toggle-slide toggle-slide-left toggle-break-lg",attrs:{"data-content":"userAside","data-toggle-screen":"lg","data-toggle-overlay":"true"}},[s("div",{staticClass:"card-inner-group"},[s("div",{staticClass:"card-inner"},[t.user?s("div",{staticClass:"user-card"},[t.user.avatar?s("div",{staticClass:"user-avatar bg-transparent"},[s("b-img",{staticClass:"rounded-circle h-100 w-100",staticStyle:{"object-fit":"cover"},attrs:{src:t.getPublicAssetUrl(t.user.avatar),width:"35"},on:{error:t.getNoAvatar}})],1):t.user.username?s("div",{staticClass:"user-avatar"},[s("span",[t._v(" "+t._s(t.user.username.charAt(0))+" ")])]):s("div",{staticClass:"user-avatar"},[s("em",{staticClass:"icon ni ni-user-alt fs-20px"})]),s("div",{staticClass:"user-info"},[s("p",{staticClass:"lead-text line-1 mb-0"},[t._v(t._s(t.user.username))]),s("span",{staticClass:"sub-text"},[t._v(t._s(t.user.email))])]),s("div",{staticClass:"user-action"},[s("div",{staticClass:"dropdown"},[t._m(0),s("div",{staticClass:"dropdown-menu dropdown-menu-right"},[s("ul",{staticClass:"link-list-opt no-bdr"},[s("li",[s("a",{staticClass:"cursor-pointer",on:{click:t.showModal}},[s("em",{staticClass:"icon ni ni-camera-fill"}),s("span",[t._v(t._s(t.$t("profile.change_avatar")))])])])])])])])]):t._e()]),s("div",{staticClass:"card-inner p-0"},[s("ul",{staticClass:"link-list-menu"},[s("li",[s("a",{class:{active:"INFO"===t.tab},attrs:{href:"javascript:void(0)"},on:{click:function(s){t.tab="INFO"}}},[s("em",{staticClass:"icon ni ni-user-fill-c"}),s("span",[t._v(t._s(t.$t("profile.personal_info")))])])]),s("li",[s("a",{class:{active:"PASSWORD"===t.tab},attrs:{href:"javascript:void(0)"},on:{click:function(s){t.tab="PASSWORD"}}},[s("em",{staticClass:"icon ni ni-edit"}),s("span",[t._v(t._s(t.$t("profile.change_password")))])])]),t.allMyFunction.length?s("li",[s("a",{class:{active:"SETTING"===t.tab},attrs:{href:"javascript:void(0)"},on:{click:function(s){t.tab="SETTING"}}},[s("b-icon",{staticClass:"fs-20px mr-2",attrs:{icon:"key","aria-hidden":"true"}}),s("span",[t._v(t._s(t.$t("profile.update_key")))])],1)]):t._e()])])])])],1)])])])]),s("b-modal",{ref:"my-modal",staticClass:"modal-sm",attrs:{"hide-footer":"",title:"Ảnh đại diện"}},[s("div",{staticClass:"d-block text-left pb-3"},[s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("b-form-group",{attrs:{"label-class":"form-label-group"}},[s("b-col",{staticClass:"card card-bordered p-0 dropzone-image"},[s("div",{staticClass:"form-control-wrap m-1"},[s("div",{staticClass:"image-layer d-flex justify-content-center"},[s("b-button",{attrs:{size:"sm",variant:"light"},on:{click:function(s){return t.handleSelectImage()}}},[(t.form.image_url,s("span",[t._v(t._s(t.$t("profile.up_image")))]))]),s("input",{ref:"image_upload_input",staticClass:"d-none",attrs:{accept:"image/jpg, image/png",hidden:"",type:"file"},on:{change:t.handleImageChange}}),s("div",{staticClass:"no-image",style:t.getImage,model:{value:t.previewImage,callback:function(s){t.previewImage=s},expression:"previewImage"}}),s("div",{staticClass:"no-image d-none",style:t.getImage,model:{value:t.form.image_url,callback:function(s){t.$set(t.form,"image_url",s)},expression:"form.image_url"}})],1)])])],1)],1)],1),s("div",{staticClass:"d-flex align-items-center justify-content-end mt-2"},[s("b-button",{staticClass:"w-fit-content",attrs:{variant:"outline-light",block:""},on:{click:t.hideModal}},[t._v(t._s(t.$t("button.cancel")))]),s("b-button",{staticClass:"w-fit-content mt-0 ms-2",attrs:{variant:"success",block:"",disabled:t.requestSubmit},on:{click:function(s){return s.preventDefault(),t.handleSubmitForm()}}},[t.requestLoading?s("span",{staticClass:"spinner-border spinner-border-sm mr-2",attrs:{role:"status"}}):t._e(),s("span",{staticClass:"visually-hidden"},[t._v("Loading...")]),t._v(" "+t._s(t.$t("button.update"))+" ")])],1)])],1)},o=[function(){var t=this,s=t._self._c;return s("a",{staticClass:"btn btn-icon btn-trigger mr-n2",attrs:{"data-toggle":"dropdown",href:"#"}},[s("em",{staticClass:"icon ni ni-more-v"})])}],r=(a("14d9"),a("ef08")),n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-inner card-inner-lg"},[s("div",{staticClass:"nk-block-head nk-block-head-lg pb-4"},[s("div",{staticClass:"nk-block-between"},[s("div",{staticClass:"nk-block-head-content"},[s("h4",{staticClass:"nk-block-title"},[t._v(t._s(t.$t("profile.change_password")))])])])]),s("div",{staticClass:"nk-block"},[s("b-form",{attrs:{"aria-autocomplete":"off"},on:{submit:function(t){t.preventDefault()}}},[s("div",{staticClass:"border-bottom-0"},[s("b-form-group",{attrs:{"label-class":"form-label-group d-flex align-item-center","invalid-feedback":t.showHtmlError("password","form")},scopedSlots:t._u([{key:"label",fn:function(){return[s("label",{staticClass:"form-label"},[t._v(" "+t._s(t.getLabel("password","form",!0))+" ")])]},proxy:!0}])},[s("div",{staticClass:"form-control-wrap"},[s("span",{staticClass:"form-icon form-icon-right passcode-switch cursor",on:{click:function(s){t.showPassword=!t.showPassword}}},[t.showPassword?s("em",{staticClass:"passcode-icon icon-show icon ni ni-eye-off"}):s("em",{staticClass:"passcode-icon icon-show icon ni ni-eye"})]),s("b-form-input",{class:{"is-invalid":t.showHtmlError("password","form")},attrs:{type:t.showPassword?"text":"password",autocomplete:"off",placeholder:t.getLabel("password","form"),size:"lg"},model:{value:t.$v.form.password.$model,callback:function(s){t.$set(t.$v.form.password,"$model","string"===typeof s?s.trim():s)},expression:"$v.form.password.$model"}})],1)])],1),s("div",{staticClass:"d-flex justify-content-between border-bottom-0 pt-0 pb-2 mt-3 flex-wrap flex-sm-nowrap input-fixed"},[s("b-form-group",{staticClass:"me-sm-1 mb-0",attrs:{"label-class":"form-label-group","invalid-feedback":t.showHtmlError("new_password","form")},scopedSlots:t._u([{key:"label",fn:function(){return[s("label",{staticClass:"form-label"},[t._v(" "+t._s(t.getLabel("new_password","form",!0))+" ")])]},proxy:!0}])},[s("div",{staticClass:"form-control-wrap"},[s("span",{staticClass:"form-icon form-icon-right passcode-switch cursor",on:{click:function(s){t.showPassword=!t.showPassword}}},[t.showPassword?s("em",{staticClass:"passcode-icon icon-show icon ni ni-eye-off"}):s("em",{staticClass:"passcode-icon icon-show icon ni ni-eye"})]),s("b-form-input",{class:{"is-invalid":t.showHtmlError("new_password","form")},attrs:{type:t.showPassword?"text":"password",autocomplete:"off",placeholder:t.getLabel("new_password","form"),size:"lg"},model:{value:t.$v.form.new_password.$model,callback:function(s){t.$set(t.$v.form.new_password,"$model","string"===typeof s?s.trim():s)},expression:"$v.form.new_password.$model"}})],1),s("span",{staticClass:"fs-12px mt-2",class:{"d-none":t.showHtmlError("new_password","form"),"d-none":null!==t.form.new_password}},[t._v("* "+t._s(t.$t("message.password_format")))])]),s("b-form-group",{staticClass:"ms-sm-1 mb-0",attrs:{"invalid-feedback":t.showHtmlError("confirm_password","form"),"label-class":"form-label-group"},scopedSlots:t._u([{key:"label",fn:function(){return[s("label",{staticClass:"form-label"},[t._v(" "+t._s(t.getLabel("confirm_password","form",!0))+" ")])]},proxy:!0}])},[s("div",{staticClass:"form-control-wrap"},[s("span",{staticClass:"form-icon form-icon-right passcode-switch cursor",on:{click:function(s){t.showPassword=!t.showPassword}}},[t.showPassword?s("em",{staticClass:"passcode-icon icon-show icon ni ni-eye-off"}):s("em",{staticClass:"passcode-icon icon-show icon ni ni-eye"})]),s("b-form-input",{class:{"is-invalid":t.showHtmlError("confirm_password","form")},attrs:{type:t.showPassword?"text":"password",autocomplete:"off",placeholder:t.getLabel("confirm_password","form"),size:"lg"},model:{value:t.$v.form.confirm_password.$model,callback:function(s){t.$set(t.$v.form.confirm_password,"$model","string"===typeof s?s.trim():s)},expression:"$v.form.confirm_password.$model"}})],1)])],1),s("div",{staticClass:"form-group text-end",class:{"mt-0":t.showHtmlError("confirm_password","form")||t.showHtmlError("new_password","form"),"mt-3":!t.showHtmlError("new_password","form")&&null!=t.form.new_password&&null===t.form.confirm_password||!t.showHtmlError("confirm_password","form")&&null!=t.form.confirm_password&&null===t.form.new_password||!t.showHtmlError("new_password","form")&&null!=t.form.new_password&&!t.showHtmlError("confirm_password","form")&&null!=t.form.confirm_password}},[s("b-button",{staticClass:"w-fit-content",attrs:{size:"md",variant:"success",block:"",type:"submit",disabled:t.$v.form.$error||!t.form.password||!t.form.new_password||!t.form.confirm_password},on:{click:t.showModal}},[t._v(" "+t._s(t.$t("login.change_password"))+" ")])],1)])],1),s("b-modal",{ref:"my-modal",staticClass:"modal-sm",attrs:{"hide-footer":"","hide-header":""}},[s("div",{staticClass:"d-block text-left pb-3"},[s("p",{staticClass:"fs-18px d-flex align-items-center lh-20"},[s("em",{staticClass:"icon ni ni-info me-1 fs-20px"}),t._v(t._s(t.$t("message.change_password")))])]),s("div",{staticClass:"d-flex align-items-center justify-content-end mt-2"},[s("b-button",{staticClass:"w-fit-content",attrs:{variant:"outline-light",block:""},on:{click:t.hideModal}},[t._v(t._s(t.$t("button.cancel")))]),s("b-button",{staticClass:"w-fit-content mt-0 ms-2",attrs:{variant:"success",block:""},on:{click:t.handleSubmit}},[t.requestLoading?s("span",{staticClass:"spinner-border spinner-border-sm mr-2",attrs:{role:"status"}}):t._e(),s("span",{staticClass:"visually-hidden"},[t._v("Loading...")]),t._v(" "+t._s(t.$t("button.update"))+" ")])],1)])],1)},l=[],c=a("6821"),d=a.n(c);const{validators:A}=window,{required:u,$label:m,sameAs:f,minLength:p,maxLength:h,password:g}=A;var b={name:"changePasswordForm",metaInfo(){return{title:this.$t("menu.change_password")}},validations(){const t={password:{required:u,$label:m(this.$t("profile.current_password")),minLength:p(8),maxLength:h(32)},new_password:{required:u,password:g,$label:m(this.$t("profile.new_password")),minLength:p(8),maxLength:h(32)},confirm_password:{required:u,sameAs:f("new_password"),$label:m(this.$t("profile.confirm_password")),sameLabel:m(this.$t("profile.new_password")),minLength:p(6),maxLength:h(32)}};return{form:t}},data(){return{form:{password:null,new_password:null,confirm_password:null},showPassword:!1,requestLoading:!1}},methods:{handleSubmit(){this.$v.form.$touch();const t=this.$v.form.$error;if(!t){if(this.requestLoading=!0,this.form.password===this.form.new_password)return this.hideModal(),this.requestLoading=!1,void this.$awnAlert(this.$t("message.not_same_password"));const{password:t,new_password:s,confirm_password:a}=this.form;let i={old_password:d()(d()(t)),new_password:d()(d()(s)),re_password:d()(d()(a))};this.$store.dispatch("Auth/updatePassword",i).then(t=>{t.success||(this.setFormError(e),this.$awnAlert(this.$t("message.change_password_failed"))),this.$awnSuccess(this.$t("message.change_password_successfully")),this.resetForm(),this.$v.$reset(),this.handleLogout()}).catch(t=>{this.setFormError(t)}).finally(()=>{this.hideModal(),this.requestLoading=!1})}},resetForm(){this.form.password=null,this.form.new_password=null,this.form.confirm_password=null},showModal(){this.$refs["my-modal"].show()},hideModal(){this.$refs["my-modal"].hide()},handleLogout(){this.$store.dispatch("Auth/logout").then(()=>{this.$router.push({name:"auth.login"})})},changeInfo(){this.$emit("changeInfo","INFO")}}},w=b,v=(a("dd1e"),a("a4dd"),a("2877")),_=Object(v["a"])(w,n,l,!1,null,"96fc2e32",null),C=_.exports,y=function(){var t,s=this,e=s._self._c;return e("div",{staticClass:"card-inner card-inner-lg"},[e("div",{staticClass:"nk-block-head nk-block-head-lg pb-4"},[e("div",{staticClass:"nk-block-between"},[e("div",{staticClass:"nk-block-head-content"},[e("h4",{staticClass:"nk-block-title"},[s._v(s._s(s.$t("profile.update_key")))])])]),s.isRegisterService?e("div",{staticClass:"nk-block-content mt-4 alert alert-danger rounded-3 p-2"},[e("span",{staticClass:"text-danger fw-medium fs-16px d-flex align-items-center mb-1"},[e("b-icon",{staticClass:"mr-1",attrs:{icon:"lightbulb","aria-hidden":"true"}}),s._v(" "+s._s(s.$t("message.note"))+" ")],1),e("ul",{staticStyle:{"list-style":"inside"}},[e("li",{staticStyle:{"list-style":"unset"}},[s._v(s._s(s.$tc("message.get_key",1)))]),e("li",{staticClass:"mt-1",staticStyle:{"list-style":"unset"}},[e("span",[s._v(s._s(s.$tc("message.get_key",2)))]),e("br"),s._m(0)])])]):s._e()]),e("div",{staticClass:"nk-block"},[e("div",{staticClass:"mb-3"},[e("div",{staticClass:"mb-1 d-flex align-center"},[e("span",{staticClass:"text-dark fw-medium mr-1"},[s._v(s._s(s.$t("profile.api_key")))]),s._m(1),e("div",{staticClass:"dropdown-menu reject-note dropdown-menu-left"},[e("div",{staticClass:"link-list-opt no-bdr p-3 w-300px text-break-spaces"},[s._v(s._s(s.$t("profile.api_key_note"))+" ")])])]),e("div",{staticClass:"border rounded-3 position-relative p-3"},[s._v(" "+s._s(s.api_key)+" "),e("span",{staticClass:"not-change-text cursor-pointer bg-white pl-2",on:{click:function(t){return s.copyToClipBoard(s.api_key)}}},[e("em",{staticClass:"icon ni ni-copy fs-18px"})])])]),e("div",{staticClass:"mb-3"},[e("div",{staticClass:"mb-1 d-flex align-center"},[e("span",{staticClass:"text-dark fw-medium mr-1"},[s._v(s._s(s.$t("profile.public_key_system")))]),s._m(2),e("div",{staticClass:"dropdown-menu reject-note dropdown-menu-left"},[e("div",{staticClass:"link-list-opt no-bdr p-3 w-300px text-break-spaces"},[s._v(s._s(s.$tc("profile.public_key_notes",2))+" ")])])]),e("div",{staticClass:"border rounded-3 position-relative p-3"},[s._v(" "+s._s(null!==(t=s.public_key_system)&&void 0!==t?t:"--")+" "),e("span",{staticClass:"not-change-text cursor-pointer bg-white pl-2",on:{click:function(t){return s.copyToClipBoard(s.public_key_system)}}},[e("em",{staticClass:"icon ni ni-copy fs-18px"})])])]),s.isRegisterService?e("b-form",{attrs:{"aria-autocomplete":"off"},on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"border-bottom-0"},[e("b-form-group",{staticClass:"flex-grow-1 mb-0 text-left",class:{"mt-4":s.form.public_key_system},attrs:{"label-class":"form-label-group d-flex align-item-center","invalid-feedback":s.showHtmlError("key","form")}},[e("div",{staticClass:"d-flex align-center mb-1"},[e("label",{staticClass:"form-label d-flex align-center mb-0"},[e("span",[s._v(" "+s._s(s.getLabel("key","form",!0))+" ")])]),e("a",{staticClass:"dropdown-toggle ml-1",attrs:{"data-toggle":"dropdown"}},[e("em",{staticClass:"icon ni ni-help text-danger fs-18px"})]),e("div",{staticClass:"dropdown-menu reject-note dropdown-menu-left"},[e("div",{staticClass:"link-list-opt no-bdr p-3 w-300px text-break-spaces"},[s._v(s._s(s.$tc("profile.public_key_notes",1)))])])]),e("div",{staticClass:"form-control-wrap"},[e("b-form-textarea",{staticClass:"mx-auto rounded-3 fs-14px",attrs:{autocomplete:"off",placeholder:s.getLabel("key","form"),debounce:"500",rows:"6","max-rows":"6"},model:{value:s.$v.form.key.$model,callback:function(t){s.$set(s.$v.form.key,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.key.$model"}})],1)])],1),e("div",{staticClass:"form-group text-end mt-4"},[e("b-button",{staticClass:"w-fit-content",attrs:{size:"md",variant:"success",block:"",type:"submit",disabled:s.requestLoading||s.$v.form.$error||!s.form.key},on:{click:s.showModal}},[s.requestLoading?e("span",{staticClass:"spinner-border spinner-border-sm mr-2",attrs:{role:"status"}}):s._e(),e("span",{staticClass:"visually-hidden"},[s._v("Loading...")]),s._v(" "+s._s(s.$t("button.update"))+" ")])],1)]):e("div",{staticClass:"alert alert-danger"},[e("span",{staticClass:"d-flex align-items-center"},[e("em",{staticClass:"icon ni ni-alert-circle fs-18px mr-1"}),s._v(" "+s._s(s.$t("message.not_register_service"))+" ")])])],1),e("b-modal",{ref:"my-modal",staticClass:"modal-sm",attrs:{"hide-footer":"","hide-header":""}},[e("div",{staticClass:"d-block text-left pb-3"},[e("p",{staticClass:"fs-18px d-flex align-items-center lh-20"},[e("em",{staticClass:"icon ni ni-info me-1 fs-20px"}),s._v(" "+s._s(s.$t("message.update_key"))+" ")])]),e("div",{staticClass:"d-flex align-items-center justify-content-end mt-2"},[e("b-button",{staticClass:"w-fit-content",attrs:{variant:"outline-light",block:""},on:{click:s.hideModal}},[s._v(s._s(s.$t("button.cancel")))]),e("b-button",{staticClass:"w-fit-content mt-0 ms-2",attrs:{variant:"success",block:""},on:{click:s.handleSubmit}},[s.requestLoading?e("span",{staticClass:"spinner-border spinner-border-sm mr-2",attrs:{role:"status"}}):s._e(),e("span",{staticClass:"visually-hidden"},[s._v("Loading...")]),s._v(" "+s._s(s.$t("button.update"))+" ")])],1)])],1)},k=[function(){var t=this,s=t._self._c;return s("a",{staticClass:"fw-medium mt-1 d-block",attrs:{href:"https://sales.timebitotc.com/generate-keygen",target:"_blank"}},[s("em",{staticClass:"icon ni ni-curve-down-right"}),t._v(" Public key ")])},function(){var t=this,s=t._self._c;return s("a",{staticClass:"dropdown-toggle",attrs:{"data-toggle":"dropdown"}},[s("em",{staticClass:"icon ni ni-help text-danger fs-18px"})])},function(){var t=this,s=t._self._c;return s("a",{staticClass:"dropdown-toggle",attrs:{"data-toggle":"dropdown"}},[s("em",{staticClass:"icon ni ni-help text-danger fs-18px"})])}];const{validators:$}=window,{required:x,$label:S,sameAs:I,minLength:L,maxLength:T,password:F}=$;var E={name:"settingKeyForm",metaInfo(){return{title:this.$t("profile.update_key")}},validations(){const t={key:{required:x,$label:S(this.$t("profile.public_key")),minLength:L(6),maxLength:T(500)}};return{form:t}},data(){return{form:{key:null},public_key_system:null,requestLoading:!1,isRegisterService:!0,api_key:null}},mounted(){this.getSettingKey()},methods:{getSettingKey(){this.setLoadingState(!0),this.$store.dispatch("Auth/getSettingKey").then(t=>{0===t.code&&t.success&&(""===t.data.api_key&&(this.isRegisterService=!1),t.data.public_key_agent&&(this.form.key=t.data.public_key_agent),t.data.public_key&&(this.public_key_system=t.data.public_key),t.data.api_key&&(this.api_key=t.data.api_key))}).catch(t=>{this.setFormError(t)}).finally(()=>{this.requestLoading=!1,this.setLoadingState(!1)})},handleSubmit(){this.$v.form.$touch();const t=this.$v.form.$error;if(!t){this.requestLoading=!0;const{key:t}=this.form;let s={public_key_agent:t};this.$store.dispatch("Auth/updateSettingKey",s).then(t=>{t.success||(this.setFormError(e),this.$awnAlert(this.$t("message.change_key_failed"))),this.$awnSuccess(this.$t("message.change_key_successfully")),this.$v.$reset(),this.getSettingKey()}).catch(t=>{this.setFormError(t)}).finally(()=>{this.hideModal(),this.requestLoading=!1})}},showModal(){this.$refs["my-modal"].show()},hideModal(){this.$refs["my-modal"].hide()},changeKey(){this.$emit("changeKey","SETTING")}}},M=E,P=(a("e9bd"),a("0f3b"),Object(v["a"])(M,y,k,!1,null,"5bbc4786",null)),R=P.exports,q=a("87ea"),B=a("40c1"),O=a("01ba"),N=a.n(O);const{validators:H}=window,{email:U,required:j,phone:D,isTrue:Z,$label:z}=H;var G={name:"index",metaInfo(){return{title:this.$t("menu.view_profile")}},components:{ChangeInfoForm:r["a"],ChangePasswordForm:C,SettingKeyForm:R},data(){return{tab:"INFO",currentTab:this.$route.name,form:{},NO_IMAGE:N.a,requestSubmit:!1,previewImage:null,uploadedImage:null,info:null,requestLoading:!1,allMyFunction:[]}},validations(){const t={image_url:{$label:z("Ảnh đại diện")}};return{form:t}},mounted(){this.user.avatar&&(this.previewImage=this.getPublicAssetUrl(this.user.avatar)),this.getAllMyFunction()},methods:{getPublicAssetUrl:q["f"],getUploadBaseUrl:q["g"],getToken:B["b"],getAllMyFunction(){this.setLoadingState(!0);let t={limit:99999};this.$store.dispatch("Service/getListFunction",t).then(t=>{0===t.code&&t.success&&(this.allMyFunction=t.data,this.setLoadingState(!1))}).catch(t=>{this.setFormError(t)}).finally(()=>{this.requestLoading=!1,this.setLoadingState(!1)})},showModal(){this.$refs["my-modal"].show()},hideModal(){this.$refs["my-modal"].hide()},handleSelectImage(){const t=this.$refs.image_upload_input;t&&t.click()},handleSubmitForm(){if(this.requestLoading)return!1;this.requestLoading=!0,this.$v.form.$touch();const t=this.$v.form.$error;if(t||this.requestSubmit)return;this.requestSubmit=!0;const{image_url:s}=this.form;this.handleUploadImage(s).then(t=>{this.$store.dispatch("Auth/info"),this.hideModal()}).catch(t=>{}).finally(()=>{this.requestSubmit=!1,this.requestLoading=!1,this.$store.dispatch("Auth/info")})},handleImageChange(t){const s=t.target.files[0];let e=new FileReader,a=this;e.onload=t=>{a.form.image_url=s,a.previewImage=t.target.result},e.readAsDataURL(s)},handleUploadImage(t){let s=new FormData;s.append("avatar",t);const e=this;return new Promise((a,i)=>{if(t.size>2097152)i({code:507});else{let t=new XMLHttpRequest;t.open("POST",this.getUploadBaseUrl(),!0),t.setRequestHeader("Authorization","Bearer "+this.getToken()),t.onreadystatechange=function(){if(4!==this.readyState)return i();if(200!==this.status)i();else{const t=JSON.parse(this.responseText);200===this.status&&t&&0==t.code?(e.$awnSuccess(e.$t("dialog.update_avatar_success")),e.hideModal(),a()):(507===t.code?e.$awnAlert(e.$t("message.size_too_big")):(e.$awnAlert(e.$t("dialog.error")),e.hideModal()),i(t))}},t.send(s)}})},changeTab(t){this.tab=t}},computed:{user(){return this.$store.getters["Auth/user"]},getImage(){return this.previewImage?"background-image:url("+this.previewImage+")":"background-image:url("+this.NO_IMAGE+")"}},watch:{currentTab:{immediate:!0,deep:!0,handler(t){this.tab=t&&"profile.password"===t?"PASSWORD":t&&"profile.info"===t?"INFO":"SETTING"}},tab(t){t&&"PASSWORD"===t?this.$router.push({name:"profile.password"}):t&&"SETTING"===t?this.$router.push({name:"profile.setting"}):this.$router.push({name:"profile.info"})},user:{immediate:!0,deep:!0,handler(t){t&&t.avatar&&(this.previewImage=this.getPublicAssetUrl(t.avatar))}}}},K=G,J=(a("87d1"),a("0dd7"),Object(v["a"])(K,i,o,!1,null,"19693606",null));s["default"]=J.exports},"5cb9":function(t,s,e){},6821:function(t,s,e){(function(){var s=e("00d8"),a=e("9a63").utf8,i=e("044b"),o=e("9a63").bin,r=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?o.stringToBytes(t):a.stringToBytes(t):i(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=s.bytesToWords(t),l=8*t.length,c=1732584193,d=-271733879,A=-1732584194,u=271733878,m=0;m<n.length;m++)n[m]=16711935&(n[m]<<8|n[m]>>>24)|4278255360&(n[m]<<24|n[m]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var f=r._ff,p=r._gg,h=r._hh,g=r._ii;for(m=0;m<n.length;m+=16){var b=c,w=d,v=A,_=u;c=f(c,d,A,u,n[m+0],7,-680876936),u=f(u,c,d,A,n[m+1],12,-389564586),A=f(A,u,c,d,n[m+2],17,606105819),d=f(d,A,u,c,n[m+3],22,-1044525330),c=f(c,d,A,u,n[m+4],7,-176418897),u=f(u,c,d,A,n[m+5],12,1200080426),A=f(A,u,c,d,n[m+6],17,-1473231341),d=f(d,A,u,c,n[m+7],22,-45705983),c=f(c,d,A,u,n[m+8],7,1770035416),u=f(u,c,d,A,n[m+9],12,-1958414417),A=f(A,u,c,d,n[m+10],17,-42063),d=f(d,A,u,c,n[m+11],22,-1990404162),c=f(c,d,A,u,n[m+12],7,1804603682),u=f(u,c,d,A,n[m+13],12,-40341101),A=f(A,u,c,d,n[m+14],17,-1502002290),d=f(d,A,u,c,n[m+15],22,1236535329),c=p(c,d,A,u,n[m+1],5,-165796510),u=p(u,c,d,A,n[m+6],9,-1069501632),A=p(A,u,c,d,n[m+11],14,643717713),d=p(d,A,u,c,n[m+0],20,-373897302),c=p(c,d,A,u,n[m+5],5,-701558691),u=p(u,c,d,A,n[m+10],9,38016083),A=p(A,u,c,d,n[m+15],14,-660478335),d=p(d,A,u,c,n[m+4],20,-405537848),c=p(c,d,A,u,n[m+9],5,568446438),u=p(u,c,d,A,n[m+14],9,-1019803690),A=p(A,u,c,d,n[m+3],14,-187363961),d=p(d,A,u,c,n[m+8],20,1163531501),c=p(c,d,A,u,n[m+13],5,-1444681467),u=p(u,c,d,A,n[m+2],9,-51403784),A=p(A,u,c,d,n[m+7],14,1735328473),d=p(d,A,u,c,n[m+12],20,-1926607734),c=h(c,d,A,u,n[m+5],4,-378558),u=h(u,c,d,A,n[m+8],11,-2022574463),A=h(A,u,c,d,n[m+11],16,1839030562),d=h(d,A,u,c,n[m+14],23,-35309556),c=h(c,d,A,u,n[m+1],4,-1530992060),u=h(u,c,d,A,n[m+4],11,1272893353),A=h(A,u,c,d,n[m+7],16,-155497632),d=h(d,A,u,c,n[m+10],23,-1094730640),c=h(c,d,A,u,n[m+13],4,681279174),u=h(u,c,d,A,n[m+0],11,-358537222),A=h(A,u,c,d,n[m+3],16,-722521979),d=h(d,A,u,c,n[m+6],23,76029189),c=h(c,d,A,u,n[m+9],4,-640364487),u=h(u,c,d,A,n[m+12],11,-421815835),A=h(A,u,c,d,n[m+15],16,530742520),d=h(d,A,u,c,n[m+2],23,-995338651),c=g(c,d,A,u,n[m+0],6,-198630844),u=g(u,c,d,A,n[m+7],10,1126891415),A=g(A,u,c,d,n[m+14],15,-1416354905),d=g(d,A,u,c,n[m+5],21,-57434055),c=g(c,d,A,u,n[m+12],6,1700485571),u=g(u,c,d,A,n[m+3],10,-1894986606),A=g(A,u,c,d,n[m+10],15,-1051523),d=g(d,A,u,c,n[m+1],21,-2054922799),c=g(c,d,A,u,n[m+8],6,1873313359),u=g(u,c,d,A,n[m+15],10,-30611744),A=g(A,u,c,d,n[m+6],15,-1560198380),d=g(d,A,u,c,n[m+13],21,1309151649),c=g(c,d,A,u,n[m+4],6,-145523070),u=g(u,c,d,A,n[m+11],10,-1120210379),A=g(A,u,c,d,n[m+2],15,718787259),d=g(d,A,u,c,n[m+9],21,-343485551),c=c+b>>>0,d=d+w>>>0,A=A+v>>>0,u=u+_>>>0}return s.endian([c,d,A,u])};r._ff=function(t,s,e,a,i,o,r){var n=t+(s&e|~s&a)+(i>>>0)+r;return(n<<o|n>>>32-o)+s},r._gg=function(t,s,e,a,i,o,r){var n=t+(s&a|e&~a)+(i>>>0)+r;return(n<<o|n>>>32-o)+s},r._hh=function(t,s,e,a,i,o,r){var n=t+(s^e^a)+(i>>>0)+r;return(n<<o|n>>>32-o)+s},r._ii=function(t,s,e,a,i,o,r){var n=t+(e^(s|~a))+(i>>>0)+r;return(n<<o|n>>>32-o)+s},r._blocksize=16,r._digestsize=16,t.exports=function(t,e){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var a=s.wordsToBytes(r(t,e));return e&&e.asBytes?a:e&&e.asString?o.bytesToString(a):s.bytesToHex(a)}})()},"6d8b":function(t,s,e){},"758d":function(t,s,e){},"87d1":function(t,s,e){"use strict";e("5cb9")},"9a63":function(t,s){var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var s=[],e=0;e<t.length;e++)s.push(255&t.charCodeAt(e));return s},bytesToString:function(t){for(var s=[],e=0;e<t.length;e++)s.push(String.fromCharCode(t[e]));return s.join("")}}};t.exports=e},a4dd:function(t,s,e){"use strict";e("07f0")},a825:function(t,s,e){},dd1e:function(t,s,e){"use strict";e("337e")},e9bd:function(t,s,e){"use strict";e("6d8b")}}]);